# OpenAI API Key for AI-powered step interpretation
OPENAI_API_KEY=your_openai_api_key_here

# Jira Configuration (optional)
JIRA_BASE_URL=https://your-domain.atlassian.net
JIRA_EMAIL=your-email@example.com
JIRA_API_TOKEN=your_jira_api_token_here

# Server Configuration
PORT=3001

def resolve(page, meaning: str, llm):
    dom = page.content()

    prompt = f"""
You are NOT a chatbot.
You are a selector generator.

STRICT RULES (MANDATORY):
- Return ONLY ONE line
- That line MUST be valid Playwright Python code
- Do NOT explain
- Do NOT describe
- Do NOT add comments
- Do NOT add quotes
- Do NOT add markdown
- Do NOT add newlines
- NEVER use XPath

Allowed APIs ONLY:
- page.getByRole
- page.getByLabel
- page.getByPlaceholder
- page.getByText

Element meaning:
{meaning}

DOM:
{dom}

OUTPUT FORMAT (EXACTLY ONE LINE):
page.getByRole("button", name="Login")
"""

    return llm.invoke(prompt).strip()


____&___

def heal(page, meaning: str, llm):
    dom = page.content()

    prompt = f"""
You are NOT a chatbot.
You are a selector generator.

STRICT RULES:
- Return ONLY ONE line
- Valid Playwright Python code only
- No explanation
- No markdown
- No comments
- NEVER use XPath

Allowed APIs:
- page.getByRole
- page.getByLabel
- page.getByPlaceholder
- page.getByText

Element meaning:
{meaning}

DOM:
{dom}

OUTPUT (ONE LINE ONLY):
page.getByRole("button", name="Login")
"""

    return llm.invoke(prompt).strip()



