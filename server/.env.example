# OpenAI API Key for AI-powered step interpretation
OPENAI_API_KEY=your_openai_api_key_here

# Jira Configuration (optional)
JIRA_BASE_URL=https://your-domain.atlassian.net
JIRA_EMAIL=your-email@example.com
JIRA_API_TOKEN=your_jira_api_token_here

# Server Configuration
PORT=3001

def resolve(page, meaning: str, llm):
    dom = page.content()

    prompt = f"""
You are NOT a chatbot.
You are a selector generator.

STRICT RULES (MANDATORY):
- Return ONLY ONE line
- That line MUST be valid Playwright PYTHON code
- Use snake_case methods ONLY
- Do NOT explain
- Do NOT add comments
- Do NOT add markdown
- Do NOT add quotes
- NEVER use XPath

Allowed APIs ONLY:
- page.get_by_role
- page.get_by_label
- page.get_by_placeholder
- page.get_by_text

Element meaning:
{meaning}

DOM:
{dom}

OUTPUT FORMAT (ONE LINE ONLY):
page.get_by_role("button", name="Login")
"""

    return llm.invoke(prompt).strip()


____&____


def heal(page, meaning: str, llm):
    dom = page.content()

    prompt = f"""
You are NOT a chatbot.
You are a selector generator.

STRICT RULES:
- Return ONLY ONE line
- Valid Playwright PYTHON code only
- Use snake_case methods ONLY
- No explanation
- No comments
- NEVER use XPath

Allowed APIs:
- page.get_by_role
- page.get_by_label
- page.get_by_placeholder
- page.get_by_text

Element meaning:
{meaning}

DOM:
{dom}

OUTPUT (ONE LINE ONLY):
page.get_by_role("button", name="Login")
"""

    return llm.invoke(prompt).strip()





